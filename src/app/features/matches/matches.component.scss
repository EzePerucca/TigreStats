@use '../../../styles/variables' as *;


:host {
  display: block;
}

.matches {
  padding: $space-xl $space-xl 0 $space-xl;
}

.section {
  margin-bottom: $space-lg;
  margin-top: $space-lg;
}

// Historial de partidos
// ── Grid ───────────────────────────────────────────────
.cards {
  display: grid;
  grid-template-columns: 1.6fr 1fr 1fr 1fr;
  gap: 12px;
}

// ── Base card ──────────────────────────────────────────
.card {
  background: $color-surface;
  border: 1px solid $color-border;
  border-radius: 14px;
  padding: 24px 22px 20px;
  position: relative;
  overflow: hidden;
  opacity: 0;
  transform: translateY(18px);
  animation: rise 0.5s ease forwards;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0;
    transition: opacity 0.3s;
  }
  &:hover::before { opacity: 1; }

  @for $i from 1 through 4 {
    &:nth-child(#{$i}) { animation-delay: #{($i - 1) * 0.08}s; }
  }
}

@keyframes rise {
  to { opacity: 1; transform: translateY(0); }
}

// ── Card: Total ────────────────────────────────────────
.card-total {
  background: linear-gradient(135deg, #1a2030 0%, #161c26 100%);
  border-color: rgba(232, 41, 58, 0.25);
  display: flex;
  flex-direction: column;

  &::before {
    background: linear-gradient(135deg, rgba(232, 41, 58, 0.06) 0%, transparent 60%);
  }

  .glow {
    position: absolute;
    top: -30px;
    left: -20px;
    width: 140px;
    height: 140px;
    background: radial-gradient(circle, rgba(232, 41, 58, 0.18) 0%, transparent 70%);
    pointer-events: none;
  }

  .card-number { font-size: 72px; margin-top: $space-md;}

  .card-label {
    font-size: 18px;
    letter-spacing: 0.24em;
    color: rgba($color-text, 0.95);
    text-shadow: 0 4px 14px rgba(232, 41, 58, 0.35);
    align-self: flex-start;
  }

  .dist-bar-container {
    margin-top: auto;
  }

  .dist-legend {
    margin-bottom: 0;
  }
}

// ── Labels ─────────────────────────────────────────────
.card-label {
  font-family: 'Barlow Condensed', sans-serif;
  font-size: 10.5px;
  font-weight: 700;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: $color-text-muted;
  margin-bottom: 10px;
}

.card-number {
  font-family: 'Barlow Condensed', sans-serif;
  font-weight: 900;
  font-size: 64px;
  line-height: 1;
  color: $color-text;
  letter-spacing: -0.02em;
  margin-bottom: 6px;
}

// ── Distribution bar ───────────────────────────────────
.dist-bar {
  display: flex;
  height: 5px;
  border-radius: 99px;
  overflow: hidden;
  gap: 2px;
  margin-bottom: 12px;

  span {
    border-radius: 99px;
    height: 100%;
    transform: scaleX(0);
    transform-origin: left;
    animation: grow 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards;

    &:nth-child(1) { animation-delay: 0.5s; }
    &:nth-child(2) { animation-delay: 0.6s; }
    &:nth-child(3) { animation-delay: 0.7s; }
  }

  .seg-g { background: $color-win; }
  .seg-e { background: $color-draw; }
  .seg-p { background: $color-loss; }
}

@keyframes grow {
  to { transform: scaleX(1); }
}

.dist-legend {
  display: flex;
  gap: 14px;

  span {
    font-size: 11px;
    color: $color-text-muted;
    display: flex;
    align-items: center;
    gap: 5px;

    &::before {
      content: '';
      display: inline-block;
      width: 7px;
      height: 7px;
      border-radius: 50%;
    }

    &.lg::before { background: $color-win; }
    &.le::before { background: $color-draw; }
    &.lp::before { background: $color-loss; }
  }
}

// ── Result cards ───────────────────────────────────────
.card-result {
  transition: transform 0.2s, border-color 0.2s;
  &:hover { transform: translateY(-3px); }
}

.card-won {
  border-top: 3px solid $color-win;
  &::before { background: linear-gradient(180deg, $color-win-dim 0%, transparent 50%); }
  .card-number { color: $color-win; }

  &--active {
    border-color: $color-win;
    box-shadow: 0 0 0 2px $color-win-dim;
    transform: translateY(-3px);
  }
}

.card-draw {
  border-top: 3px solid $color-draw;
  &::before { background: linear-gradient(180deg, $color-draw-dim 0%, transparent 50%); }
  .card-number { color: $color-draw; }

  &--active {
    border-color: $color-draw;
    box-shadow: 0 0 0 2px $color-draw-dim;
    transform: translateY(-3px);
  }
}

.card-lost {
  border-top: 3px solid $color-loss;
  &::before { background: linear-gradient(180deg, $color-loss-dim 0%, transparent 50%); }
  .card-number { color: $color-loss; }

  &--active {
    border-color: $color-loss;
    box-shadow: 0 0 0 2px $color-loss-dim;
    transform: translateY(-3px);
  }
}

// ── Badge ──────────────────────────────────────────────
.badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 600;
  padding: 5px 9px;
  border-radius: 99px;
  margin-bottom: 10px;

  &::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: currentColor;
  }

  &-won  { background: $color-win-dim;  color: $color-win; }
  &-draw { background: $color-draw-dim; color: $color-draw; }
  &-lost { background: $color-loss-dim;    color: $color-loss; }
}

// ── Percentage ─────────────────────────────────────────
.pct-wrap {
  margin-top: 18px;
  padding-top: 14px;
  border-top: 1px solid $color-border;
}

.pct-number {
  font-family: 'Barlow Condensed', sans-serif;
  font-size: 30px;
  font-weight: 800;
  color: $color-text;
  line-height: 1;

  small {
    font-size: 13px;
    font-weight: 500;
    color: $color-text-muted;
    margin-left: 3px;
  }
}

// ── Grid Historial de partidos ───────────────────────────────────────────────

.matches-history__card {
  @include card;
  overflow: hidden;
}

.matches-history__table-wrap {
  width: 100%;
  overflow-x: auto;
}

.matches-history__table {
  width: 100%;
  border-collapse: collapse;
  min-width: 840px;

  th,
  td {
    padding: 12px 10px;
    font-size: 0.88rem;
    color: rgba($color-text, 0.82);
    text-align: left;
  }

  th {
    color: rgba($color-text-muted, 0.9);
    font-size: 0.72rem;
    letter-spacing: 0.09em;
    font-weight: 600;
    text-transform: uppercase;
  }

  tbody tr {
    transition: background 0.15s ease;
    border-bottom: 1px solid $color-border;


    &:hover {
      background: rgba(255, 255, 255, 0.03);
    }

    &:last-child td {
      border-bottom: none;
    }
  }
}

.matches-history__fixture {
  display: inline-flex;
  align-items: center;
  gap: 7px;
}

.matches-history__team--tigre {
  color: $color-text;
  font-weight: 600;
}

.matches-history__score {
  font-family: $font-display;
  font-size: 1.25rem;
  letter-spacing: 0.05em;
  color: $color-text;
}

.result-badge {
  min-width: 2.2em;
  text-align: center;
  border-radius: $radius-sm;
  font-weight: bold;
  padding: 0.2em 0.5em;
  display: inline-flex;
  justify-content: center;

  &.result--win {
    background: rgba($color-win, 0.12);
    color: $color-win;
  }

  &.result--draw {
    background: rgba($color-draw, 0.12);
    color: $color-draw;
  }

  &.result--loss {
    background: rgba($color-loss, 0.12);
    color: $color-loss;
  }
}